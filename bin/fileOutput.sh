#!/usr/bin/env bash

DIRECTORY="${1:-.}" # Default to "." if no argument is given
DATESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
FILE_VERSION=$(file --version 2>/dev/null | head -n 1 || echo "file version unknown")
SYSTEM_INFO=$(uname -a)

echo "# Do not edit, this was generated by fileOutput.sh"
echo "# Datestamp: $DATESTAMP"
echo "# File command version: $FILE_VERSION"
echo "# System information: $SYSTEM_INFO"
echo

find -L "$DIRECTORY" -type f | while IFS= read -r file; do
  file_type=$(file -b "$file")
  printf "%s\t%s\n" "$file" "$file_type"
done